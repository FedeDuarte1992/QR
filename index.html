<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Pro Master Elite</title>
    <script type="text/javascript" src="https://unpkg.com/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>
    
    <script>
        window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>

    <style>
        :root { --primary: #c62828; --bg: #f8f9fa; --border: #dee2e6; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); margin: 0; padding: 20px; display: flex; justify-content: center; }
        
        .main-container { display: grid; grid-template-columns: 1fr 380px; gap: 25px; max-width: 1100px; width: 100%; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }

        /* Tabs Superiores de Contenido */
        .type-selector { grid-column: 1 / -1; display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 20px; border-bottom: 2px solid #eee; padding-bottom: 15px; }
        .tab-btn { padding: 10px 15px; border: 1px solid var(--border); background: white; border-radius: 6px; cursor: pointer; font-size: 13px; font-weight: 600; color: #555; transition: 0.2s; display: flex; align-items: center; gap: 6px; }
        .tab-btn.active { background: var(--primary); color: white; border-color: var(--primary); }

        /* Acordeones de Configuraci√≥n */
        .accordion { border: 1px solid var(--border); border-radius: 6px; margin-bottom: 12px; }
        .acc-header { background: #fff; padding: 14px; cursor: pointer; font-weight: bold; color: var(--primary); display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid var(--border); transition: 0.3s; }
        .acc-header:hover { background: #fff5f5; }
        .acc-content { padding: 20px; display: none; background: white; }
        .acc-content.active { display: block; }

        /* Campos de Entrada */
        .field { margin-bottom: 15px; }
        label { display: block; font-size: 11px; font-weight: bold; color: #666; text-transform: uppercase; margin-bottom: 6px; }
        input, select, textarea { width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 6px; box-sizing: border-box; font-size: 14px; }
        .row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .content-section { display: none; }
        .content-section.active { display: block; }

        /* Vista Previa y Botones */
        .preview-side { display: flex; flex-direction: column; align-items: center; position: sticky; top: 20px; }
        #canvas { background: white; padding: 15px; border: 1px solid var(--border); border-radius: 12px; margin-bottom: 15px; }
        #label-display { font-weight: bold; color: #333; margin-bottom: 20px; font-size: 18px; }
        .btn-download { background: var(--primary); color: white; border: none; padding: 18px; border-radius: 8px; font-weight: bold; cursor: pointer; width: 100%; font-size: 18px; transition: 0.3s; }
        .btn-download:hover { background: #a52121; transform: translateY(-2px); }

        @media (max-width: 900px) { .main-container { grid-template-columns: 1fr; } .preview-side { position: static; } }
    </style>
</head>
<body>

<div class="main-container">
    <div class="editor-side">
        <h2 style="color: #333; margin-top: 0;">Crea tu C√≥digo QR</h2>
        
        <div class="type-selector">
            <button class="tab-btn active" onclick="switchTab('url', this)">üîó Enlace</button>
            <button class="tab-btn" onclick="switchTab('whatsapp', this)">üí¨ WhatsApp</button>
            <button class="tab-btn" onclick="switchTab('wifi', this)">üì∂ WiFi</button>
            <button class="tab-btn" onclick="switchTab('text', this)">üìÑ Texto</button>
        </div>

        <div id="sec-url" class="content-section active">
            <div class="field"><label>URL / LINK</label><input type="text" id="val-url" value="https://google.com" oninput="updateQR()"></div>
        </div>

        <div id="sec-whatsapp" class="content-section">
            <div class="row">
                <div class="field"><label>Tel√©fono (c√≥d. pa√≠s)</label><input type="text" id="wa-phone" placeholder="54911..." oninput="updateQR()"></div>
                <div class="field"><label>Mensaje Inicial</label><input type="text" id="wa-msg" placeholder="Hola!" oninput="updateQR()"></div>
            </div>
        </div>

        <div id="sec-wifi" class="content-section">
            <div class="field"><label>Nombre de Red (SSID)</label><input type="text" id="wf-name" placeholder="Mi WiFi" oninput="updateQR()"></div>
            <div class="row">
                <div class="field"><label>Contrase√±a</label><input type="text" id="wf-pass" placeholder="Password123" oninput="updateQR()"></div>
                <div class="field"><label>Seguridad</label>
                    <select id="wf-enc" onchange="updateQR()"><option value="WPA">WPA/WPA2</option><option value="WEP">WEP</option><option value="nopass">Sin Clave</option></select>
                </div>
            </div>
        </div>

        <div id="sec-text" class="content-section">
            <div class="field"><label>Tu Mensaje</label><textarea id="val-text" rows="3" oninput="updateQR()"></textarea></div>
        </div>

        <div class="accordion">
            <div class="acc-header" onclick="toggleAcc(this)">üé® Colores <span>‚ñº</span></div>
            <div class="acc-content active">
                <div class="row">
                    <div class="field"><label>Color de Puntos</label><input type="color" id="dotColor" value="#000000" oninput="updateQR()"></div>
                    <div class="field"><label>Color de Fondo</label><input type="color" id="bgColor" value="#ffffff" oninput="updateQR()"></div>
                </div>
            </div>
        </div>

        <div class="accordion">
            <div class="acc-header" onclick="toggleAcc(this)">üèÅ Dise√±o de Puntos <span>‚ñº</span></div>
            <div class="acc-content">
                <div class="field">
                    <label>Estilo del Patr√≥n</label>
                    <select id="dotStyle" onchange="updateQR()">
                        <option value="square">Cuadrado</option><option value="dots" selected>C√≠rculos</option><option value="rounded">Redondeado</option><option value="extra-rounded">Gota</option><option value="classy">Elegante</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="accordion">
            <div class="acc-header" onclick="toggleAcc(this)">üñºÔ∏è Logo y Texto <span>‚ñº</span></div>
            <div class="acc-content">
                <div class="field"><label>URL de Logo Central</label><input type="text" id="logoUrl" placeholder="https://..." oninput="updateQR()"></div>
                <div class="field"><label>Texto debajo del QR</label><input type="text" id="bottomLabel" value="¬°Escanea ahora!" oninput="updateQR()"></div>
            </div>
        </div>

        <div class="accordion">
            <div class="acc-header" onclick="toggleAcc(this)">üî≤ Marco (Esquinas) <span>‚ñº</span></div>
            <div class="acc-content">
                <div class="field">
                    <label>Forma de Esquina</label>
                    <select id="cornerStyle" onchange="updateQR()">
                        <option value="square">Cuadrado</option><option value="dot">Circular</option><option value="extra-rounded" selected>Redondeado</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <div class="preview-side">
        <div id="label-display">¬°Escanea ahora!</div>
        <div id="canvas"></div>
        <button class="btn-download" onclick="downloadQR()">‚úî Download PNG</button>
    </div>
</div>

<script>
    let currentType = 'url';

    const qrCode = new QRCodeStyling({
        width: 320, height: 320,
        dotsOptions: { color: "#000000", type: "dots" },
        backgroundOptions: { color: "#ffffff" },
        imageOptions: { crossOrigin: "anonymous", margin: 8 }
    });

    qrCode.append(document.getElementById("canvas"));

    function switchTab(type, btn) {
        currentType = type;
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
        document.getElementById('sec-' + type).classList.add('active');
        updateQR();
    }

    function toggleAcc(header) {
        const content = header.nextElementSibling;
        content.classList.toggle('active');
        header.querySelector('span').innerText = content.classList.contains('active') ? '‚ñ≤' : '‚ñº';
    }

    function updateQR() {
        let finalData = "";
        if (currentType === 'url') finalData = document.getElementById('val-url').value;
        if (currentType === 'whatsapp') finalData = `https://wa.me/${document.getElementById('wa-phone').value}?text=${encodeURIComponent(document.getElementById('wa-msg').value)}`;
        if (currentType === 'wifi') finalData = `WIFI:S:${document.getElementById('wf-name').value};T:${document.getElementById('wf-enc').value};P:${document.getElementById('wf-pass').value};;`;
        if (currentType === 'text') finalData = document.getElementById('val-text').value;

        document.getElementById('label-display').innerText = document.getElementById('bottomLabel').value;

        qrCode.update({
            data: finalData || " ",
            dotsOptions: { color: document.getElementById('dotColor').value, type: document.getElementById('dotStyle').value },
            backgroundOptions: { color: document.getElementById('bgColor').value },
            image: document.getElementById('logoUrl').value,
            cornersSquareOptions: { type: document.getElementById('cornerStyle').value, color: document.getElementById('dotColor').value },
            cornersDotOptions: { type: document.getElementById('cornerStyle').value === 'dot' ? 'dot' : 'square', color: document.getElementById('dotColor').value },
            margin: 0
        });
    }

    function downloadQR() {
        // Enviar evento a Vercel Analytics al descargar
        if (window.va) {
            window.va('event', { name: 'descarga_qr_pro', data: { tipo: currentType } });
        }

        qrCode.update({ margin: 5 }); // Marco de 5px para la descarga
        qrCode.download({ name: "qr-pro-elite", extension: "png" }).then(() => {
            qrCode.update({ margin: 0 });
        });
    }

    // Carga Inicial
    window.onload = updateQR;
</script>

</body>
</html>        .btn-reset-small { background: #e2e8f0; border: none; padding: 4px 8px; border-radius: 6px; font-size: 11px; cursor: pointer; color: #64748b; }

        @media (max-width: 800px) { .card { grid-template-columns: 1fr; } .preview-side { position: static; } }
    </style>
</head>
<body>

<div class="card">
    <h2>Generador QR Profesional</h2>

    <div class="type-selector">
        <button class="tab-btn active" onclick="switchTab('url', this)">üîó Enlace</button>
        <button class="tab-btn" onclick="switchTab('whatsapp', this)">üí¨ WhatsApp</button>
        <button class="tab-btn" onclick="switchTab('wifi', this)">üì∂ WiFi</button>
        <button class="tab-btn" onclick="switchTab('text', this)">üìÑ Texto</button>
    </div>

    <div class="controls">
        <div class="field-group">
            <div class="group-header"><h3>Contenido</h3></div>
            
            <div id="sec-url" class="content-section active">
                <div class="field"><label>URL</label><input type="text" id="val-url" value="https://google.com" oninput="updateQR()"></div>
            </div>

            <div id="sec-whatsapp" class="content-section">
                <div class="row">
                    <div class="field"><label>Tel√©fono (con c√≥digo)</label><input type="text" id="wa-phone" placeholder="54911..." oninput="updateQR()"></div>
                    <div class="field"><label>Mensaje</label><input type="text" id="wa-msg" placeholder="Hola!" oninput="updateQR()"></div>
                </div>
            </div>

            <div id="sec-wifi" class="content-section">
                <div class="field"><label>Nombre Red (SSID)</label><input type="text" id="wf-name" oninput="updateQR()"></div>
                <div class="row">
                    <div class="field"><label>Contrase√±a</label><input type="text" id="wf-pass" oninput="updateQR()"></div>
                    <div class="field">
                        <label>Seguridad</label>
                        <select id="wf-enc" onchange="updateQR()"><option value="WPA">WPA/WPA2</option><option value="WEP">WEP</option><option value="nopass">Abierta</option></select>
                    </div>
                </div>
            </div>

            <div id="sec-text" class="content-section">
                <div class="field"><label>Texto Libre</label><textarea id="val-text" oninput="updateQR()"></textarea></div>
            </div>
        </div>

        <div class="field-group">
            <div class="group-header"><h3>Personalizaci√≥n</h3><button class="btn-reset-small" onclick="resetDesign()">Reset</button></div>
            <div class="row">
                <div class="field"><label>Color QR</label><input type="color" id="dotColor" value="#c62828" oninput="updateQR()"></div>
                <div class="field"><label>Forma Puntos</label>
                    <select id="dotStyle" onchange="updateQR()">
                        <option value="square">Cuadrado</option><option value="dots">C√≠rculos</option><option value="rounded" selected>Redondeado</option><option value="extra-rounded">Gota</option>
                    </select>
                </div>
            </div>
            <div class="field"><label>Logo URL (Opcional)</label><input type="text" id="logoUrl" placeholder="https://..." oninput="updateQR()"></div>
            <div class="field"><label>Texto Inferior</label><input type="text" id="bottomLabel" value="¬°Escanea aqu√≠!" oninput="updateQR()"></div>
        </div>
    </div>

    <div class="preview-side">
        <div id="canvas"></div>
        <div id="label-display">¬°Escanea aqu√≠!</div>
        <button class="btn-download" onclick="downloadQR()">Descargar PNG (Marco 5px)</button>
    </div>
</div>

<script>
    let currentType = 'url';

    const qrCode = new QRCodeStyling({
        width: 300, height: 300,
        dotsOptions: { color: "#c62828", type: "rounded" },
        imageOptions: { crossOrigin: "anonymous", margin: 5 }
    });

    qrCode.append(document.getElementById("canvas"));

    function switchTab(type, btn) {
        currentType = type;
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
        document.getElementById('sec-' + type).classList.add('active');
        updateQR();
    }

    function updateQR() {
        let data = "";
        if (currentType === 'url') data = document.getElementById('val-url').value;
        if (currentType === 'whatsapp') data = `https://wa.me/${document.getElementById('wa-phone').value}?text=${encodeURIComponent(document.getElementById('wa-msg').value)}`;
        if (currentType === 'wifi') data = `WIFI:S:${document.getElementById('wf-name').value};T:${document.getElementById('wf-enc').value};P:${document.getElementById('wf-pass').value};;`;
        if (currentType === 'text') data = document.getElementById('val-text').value;

        const label = document.getElementById('bottomLabel').value;
        document.getElementById('label-display').innerText = label;

        qrCode.update({
            data: data || " ",
            dotsOptions: { color: document.getElementById('dotColor').value, type: document.getElementById('dotStyle').value },
            image: document.getElementById('logoUrl').value,
            margin: 0
        });
    }

    function downloadQR() {
        qrCode.update({ margin: 5 });
        qrCode.download({ name: "mi-qr-pro", extension: "png" }).then(() => qrCode.update({ margin: 0 }));
    }

    function resetDesign() {
        document.getElementById('dotColor').value = "#c62828";
        document.getElementById('dotStyle').value = "rounded";
        document.getElementById('logoUrl').value = "";
        updateQR();
    }

    window.onload = updateQR;
</script>
</body>
</html></head>
<body>

<div class="card">
    <h2>Generador de QR Din√°mico</h2>

    <div class="controls">
        <div class="field-group">
            <div class="group-header">
                <h3>Contenido y Logo</h3>
                <button class="btn-reset-small" onclick="resetSection('data')">Reset</button>
            </div>
            <div class="field">
                <label>URL / Texto</label>
                <input type="text" id="input-url" value="https://google.com">
            </div>
            <div class="row">
                <div class="field">
                    <label>Logo URL</label>
                    <input type="text" id="input-logo" placeholder="URL de la imagen">
                </div>
                <div class="field">
                    <label>Texto Etiqueta</label>
                    <input type="text" id="input-label" value="¬°Escanea ahora!">
                </div>
            </div>
        </div>

        <div class="field-group">
            <div class="group-header">
                <h3>Estilo de Puntos</h3>
                <button class="btn-reset-small" onclick="resetSection('dots')">Reset</button>
            </div>
            <div class="row">
                <div class="field">
                    <label>Color 1</label>
                    <input type="color" id="color-dots-1" value="#2563eb">
                </div>
                <div class="field">
                    <label>Color 2 (Opcional)</label>
                    <input type="color" id="color-dots-2" value="#2563eb">
                </div>
            </div>
            <div class="row">
                <div class="field">
                    <label>Forma</label>
                    <select id="select-dots-style">
                        <option value="square">Cuadrado</option>
                        <option value="dots">C√≠rculos</option>
                        <option value="rounded" selected>Redondeado</option>
                        <option value="extra-rounded">Gota</option>
                        <option value="classy">Elegante</option>
                    </select>
                </div>
                <div class="field">
                    <label>Tipo Degradado</label>
                    <select id="select-dots-grad">
                        <option value="none">S√≥lido</option>
                        <option value="linear" selected>Lineal</option>
                        <option value="radial">Radial</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="field-group">
            <div class="group-header">
                <h3>Marcos de Esquina</h3>
                <button class="btn-reset-small" onclick="resetSection('corners')">Reset</button>
            </div>
            <div class="row">
                <div class="field">
                    <label>Color Esquina</label>
                    <input type="color" id="color-corners" value="#0f172a">
                </div>
                <div class="field">
                    <label>Estilo Marco</label>
                    <select id="select-corners-style">
                        <option value="square">Cuadrado</option>
                        <option value="dot">C√≠rculo</option>
                        <option value="extra-rounded" selected>Redondeado</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <div class="preview-side">
        <div id="canvas"></div>
        <div id="label-display">¬°Escanea ahora!</div>
        <div class="main-actions">
            <button class="btn-download" onclick="downloadQR()">Descargar</button>
        </div>
    </div>
</div>

<script>
    const defaults = {
        url: "https://google.com", logo: "", label: "¬°Escanea ahora!",
        dots1: "#2563eb", dots2: "#2563eb", dotsStyle: "rounded", dotsGrad: "linear",
        cornersColor: "#0f172a", cornersStyle: "extra-rounded"
    };

    const qrCode = new QRCodeStyling({
        width: 300,
        height: 300,
        type: "svg",
        margin: 0, // Margen en vista previa 0 para que luzca bien en la web
        data: defaults.url,
        imageOptions: { crossOrigin: "anonymous", margin: 5 }
    });

    qrCode.append(document.getElementById("canvas"));

    function updateQR() {
        const url = document.getElementById('input-url').value;
        const logo = document.getElementById('input-logo').value;
        const label = document.getElementById('input-label').value;
        const dots1 = document.getElementById('color-dots-1').value;
        const dots2 = document.getElementById('color-dots-2').value;
        const dotsStyle = document.getElementById('select-dots-style').value;
        const dotsGrad = document.getElementById('select-dots-grad').value;
        const cornerColor = document.getElementById('color-corners').value;
        const cornerStyle = document.getElementById('select-corners-style').value;

        document.getElementById('label-display').innerText = label;

        qrCode.update({
            data: url || " ",
            image: logo,
            margin: 0, 
            dotsOptions: {
                type: dotsStyle,
                color: dots1,
                gradient: dotsGrad !== "none" ? {
                    type: dotsGrad,
                    colorStops: [{ offset: 0, color: dots1 }, { offset: 1, color: dots2 }]
                } : null
            },
            cornersSquareOptions: { type: cornerStyle, color: cornerColor },
            cornersDotOptions: { type: cornerStyle === 'dot' ? 'dot' : 'square', color: cornerColor }
        });
    }

    function resetSection(section) {
        if (section === 'data') {
            document.getElementById('input-url').value = defaults.url;
            document.getElementById('input-logo').value = defaults.logo;
            document.getElementById('input-label').value = defaults.label;
        } else if (section === 'dots') {
            document.getElementById('color-dots-1').value = defaults.dots1;
            document.getElementById('color-dots-2').value = defaults.dots2;
            document.getElementById('select-dots-style').value = defaults.dotsStyle;
            document.getElementById('select-dots-grad').value = defaults.dotsGrad;
        } else if (section === 'corners') {
            document.getElementById('color-corners').value = defaults.cornersColor;
            document.getElementById('select-corners-style').value = defaults.cornersStyle;
        }
        updateQR();
    }

    document.querySelectorAll('input, select').forEach(el => {
        el.addEventListener('input', updateQR);
    });

    function downloadQR() {
        // Al descargar, forzamos un margen de 5px para que no quede pegado al borde del archivo
        qrCode.update({ margin: 5 });
        qrCode.download({ name: "mi-qr-pro", extension: "png" }).then(() => {
            // Regresamos el margen a 0 para la vista previa web despu√©s de descargar
            qrCode.update({ margin: 0 });
        });
    }

    updateQR();
</script>

</body>
</html>
