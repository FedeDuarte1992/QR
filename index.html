<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Editor Pro+ Elite</title>
    <script type="text/javascript" src="https://unpkg.com/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>
    <script defer src="/_vercel/insights/script.js"></script>
    <style>
        :root { --primary: #c62828; --bg: #f1f5f9; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); display: flex; justify-content: center; padding: 30px; margin: 0; }
        .card { background: white; padding: 2rem; border-radius: 24px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); width: 100%; max-width: 950px; display: grid; grid-template-columns: 1.5fr 1fr; gap: 2rem; }
        h2 { grid-column: 1 / -1; margin: 0; text-align: center; color: #1e293b; }

        /* TABS DE TIPO DE CONTENIDO */
        .type-selector { grid-column: 1 / -1; display: flex; gap: 10px; justify-content: center; margin-bottom: 20px; flex-wrap: wrap; }
        .tab-btn { padding: 10px 20px; border: 1px solid #ddd; background: white; border-radius: 8px; cursor: pointer; font-weight: 600; color: #64748b; transition: 0.2s; }
        .tab-btn.active { background: var(--primary); color: white; border-color: var(--primary); }

        .field-group { border: 1px solid #e2e8f0; border-radius: 16px; padding: 1.2rem; background: #f8fafc; margin-bottom: 1.5rem; }
        .group-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid #e2e8f0; padding-bottom: 8px; }
        .group-header h3 { margin: 0; font-size: 1rem; color: #475569; }
        
        .field { display: flex; flex-direction: column; gap: 5px; margin-bottom: 12px; }
        .content-section { display: none; }
        .content-section.active { display: block; }

        label { font-size: 0.75rem; font-weight: 700; color: #64748b; text-transform: uppercase; }
        input, select, textarea { padding: 10px; border: 1px solid #cbd5e1; border-radius: 8px; font-size: 0.9rem; font-family: inherit; }
        .row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }

        .preview-side { display: flex; flex-direction: column; align-items: center; position: sticky; top: 20px; }
        #canvas { background: white; padding: 15px; border-radius: 20px; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); }
        #label-display { margin: 15px 0; font-weight: 700; color: #1e293b; font-size: 1.1rem; }
        
        .btn-download { background: var(--primary); color: white; padding: 15px; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; width: 100%; }
        .btn-reset-small { background: #e2e8f0; border: none; padding: 4px 8px; border-radius: 6px; font-size: 11px; cursor: pointer; color: #64748b; }

        @media (max-width: 800px) { .card { grid-template-columns: 1fr; } .preview-side { position: static; } }
    </style>
</head>
<body>

<div class="card">
    <h2>Generador QR Profesional</h2>

    <div class="type-selector">
        <button class="tab-btn active" onclick="switchTab('url', this)">ðŸ”— Enlace</button>
        <button class="tab-btn" onclick="switchTab('whatsapp', this)">ðŸ’¬ WhatsApp</button>
        <button class="tab-btn" onclick="switchTab('wifi', this)">ðŸ“¶ WiFi</button>
        <button class="tab-btn" onclick="switchTab('text', this)">ðŸ“„ Texto</button>
    </div>

    <div class="controls">
        <div class="field-group">
            <div class="group-header"><h3>Contenido</h3></div>
            
            <div id="sec-url" class="content-section active">
                <div class="field"><label>URL</label><input type="text" id="val-url" value="https://google.com" oninput="updateQR()"></div>
            </div>

            <div id="sec-whatsapp" class="content-section">
                <div class="row">
                    <div class="field"><label>TelÃ©fono (con cÃ³digo)</label><input type="text" id="wa-phone" placeholder="54911..." oninput="updateQR()"></div>
                    <div class="field"><label>Mensaje</label><input type="text" id="wa-msg" placeholder="Hola!" oninput="updateQR()"></div>
                </div>
            </div>

            <div id="sec-wifi" class="content-section">
                <div class="field"><label>Nombre Red (SSID)</label><input type="text" id="wf-name" oninput="updateQR()"></div>
                <div class="row">
                    <div class="field"><label>ContraseÃ±a</label><input type="text" id="wf-pass" oninput="updateQR()"></div>
                    <div class="field">
                        <label>Seguridad</label>
                        <select id="wf-enc" onchange="updateQR()"><option value="WPA">WPA/WPA2</option><option value="WEP">WEP</option><option value="nopass">Abierta</option></select>
                    </div>
                </div>
            </div>

            <div id="sec-text" class="content-section">
                <div class="field"><label>Texto Libre</label><textarea id="val-text" oninput="updateQR()"></textarea></div>
            </div>
        </div>

        <div class="field-group">
            <div class="group-header"><h3>PersonalizaciÃ³n</h3><button class="btn-reset-small" onclick="resetDesign()">Reset</button></div>
            <div class="row">
                <div class="field"><label>Color QR</label><input type="color" id="dotColor" value="#c62828" oninput="updateQR()"></div>
                <div class="field"><label>Forma Puntos</label>
                    <select id="dotStyle" onchange="updateQR()">
                        <option value="square">Cuadrado</option><option value="dots">CÃ­rculos</option><option value="rounded" selected>Redondeado</option><option value="extra-rounded">Gota</option>
                    </select>
                </div>
            </div>
            <div class="field"><label>Logo URL (Opcional)</label><input type="text" id="logoUrl" placeholder="https://..." oninput="updateQR()"></div>
            <div class="field"><label>Texto Inferior</label><input type="text" id="bottomLabel" value="Â¡Escanea aquÃ­!" oninput="updateQR()"></div>
        </div>
    </div>

    <div class="preview-side">
        <div id="canvas"></div>
        <div id="label-display">Â¡Escanea aquÃ­!</div>
        <button class="btn-download" onclick="downloadQR()">Descargar PNG (Marco 5px)</button>
    </div>
</div>

<script>
    let currentType = 'url';

    const qrCode = new QRCodeStyling({
        width: 300, height: 300,
        dotsOptions: { color: "#c62828", type: "rounded" },
        imageOptions: { crossOrigin: "anonymous", margin: 5 }
    });

    qrCode.append(document.getElementById("canvas"));

    function switchTab(type, btn) {
        currentType = type;
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
        document.getElementById('sec-' + type).classList.add('active');
        updateQR();
    }

    function updateQR() {
        let data = "";
        if (currentType === 'url') data = document.getElementById('val-url').value;
        if (currentType === 'whatsapp') data = `https://wa.me/${document.getElementById('wa-phone').value}?text=${encodeURIComponent(document.getElementById('wa-msg').value)}`;
        if (currentType === 'wifi') data = `WIFI:S:${document.getElementById('wf-name').value};T:${document.getElementById('wf-enc').value};P:${document.getElementById('wf-pass').value};;`;
        if (currentType === 'text') data = document.getElementById('val-text').value;

        const label = document.getElementById('bottomLabel').value;
        document.getElementById('label-display').innerText = label;

        qrCode.update({
            data: data || " ",
            dotsOptions: { color: document.getElementById('dotColor').value, type: document.getElementById('dotStyle').value },
            image: document.getElementById('logoUrl').value,
            margin: 0
        });
    }

    function downloadQR() {
        qrCode.update({ margin: 5 });
        qrCode.download({ name: "mi-qr-pro", extension: "png" }).then(() => qrCode.update({ margin: 0 }));
    }

    function resetDesign() {
        document.getElementById('dotColor').value = "#c62828";
        document.getElementById('dotStyle').value = "rounded";
        document.getElementById('logoUrl').value = "";
        updateQR();
    }

    window.onload = updateQR;
</script>
</body>
</html></head>
<body>

<div class="card">
    <h2>Generador de QR DinÃ¡mico</h2>

    <div class="controls">
        <div class="field-group">
            <div class="group-header">
                <h3>Contenido y Logo</h3>
                <button class="btn-reset-small" onclick="resetSection('data')">Reset</button>
            </div>
            <div class="field">
                <label>URL / Texto</label>
                <input type="text" id="input-url" value="https://google.com">
            </div>
            <div class="row">
                <div class="field">
                    <label>Logo URL</label>
                    <input type="text" id="input-logo" placeholder="URL de la imagen">
                </div>
                <div class="field">
                    <label>Texto Etiqueta</label>
                    <input type="text" id="input-label" value="Â¡Escanea ahora!">
                </div>
            </div>
        </div>

        <div class="field-group">
            <div class="group-header">
                <h3>Estilo de Puntos</h3>
                <button class="btn-reset-small" onclick="resetSection('dots')">Reset</button>
            </div>
            <div class="row">
                <div class="field">
                    <label>Color 1</label>
                    <input type="color" id="color-dots-1" value="#2563eb">
                </div>
                <div class="field">
                    <label>Color 2 (Opcional)</label>
                    <input type="color" id="color-dots-2" value="#2563eb">
                </div>
            </div>
            <div class="row">
                <div class="field">
                    <label>Forma</label>
                    <select id="select-dots-style">
                        <option value="square">Cuadrado</option>
                        <option value="dots">CÃ­rculos</option>
                        <option value="rounded" selected>Redondeado</option>
                        <option value="extra-rounded">Gota</option>
                        <option value="classy">Elegante</option>
                    </select>
                </div>
                <div class="field">
                    <label>Tipo Degradado</label>
                    <select id="select-dots-grad">
                        <option value="none">SÃ³lido</option>
                        <option value="linear" selected>Lineal</option>
                        <option value="radial">Radial</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="field-group">
            <div class="group-header">
                <h3>Marcos de Esquina</h3>
                <button class="btn-reset-small" onclick="resetSection('corners')">Reset</button>
            </div>
            <div class="row">
                <div class="field">
                    <label>Color Esquina</label>
                    <input type="color" id="color-corners" value="#0f172a">
                </div>
                <div class="field">
                    <label>Estilo Marco</label>
                    <select id="select-corners-style">
                        <option value="square">Cuadrado</option>
                        <option value="dot">CÃ­rculo</option>
                        <option value="extra-rounded" selected>Redondeado</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <div class="preview-side">
        <div id="canvas"></div>
        <div id="label-display">Â¡Escanea ahora!</div>
        <div class="main-actions">
            <button class="btn-download" onclick="downloadQR()">Descargar</button>
        </div>
    </div>
</div>

<script>
    const defaults = {
        url: "https://google.com", logo: "", label: "Â¡Escanea ahora!",
        dots1: "#2563eb", dots2: "#2563eb", dotsStyle: "rounded", dotsGrad: "linear",
        cornersColor: "#0f172a", cornersStyle: "extra-rounded"
    };

    const qrCode = new QRCodeStyling({
        width: 300,
        height: 300,
        type: "svg",
        margin: 0, // Margen en vista previa 0 para que luzca bien en la web
        data: defaults.url,
        imageOptions: { crossOrigin: "anonymous", margin: 5 }
    });

    qrCode.append(document.getElementById("canvas"));

    function updateQR() {
        const url = document.getElementById('input-url').value;
        const logo = document.getElementById('input-logo').value;
        const label = document.getElementById('input-label').value;
        const dots1 = document.getElementById('color-dots-1').value;
        const dots2 = document.getElementById('color-dots-2').value;
        const dotsStyle = document.getElementById('select-dots-style').value;
        const dotsGrad = document.getElementById('select-dots-grad').value;
        const cornerColor = document.getElementById('color-corners').value;
        const cornerStyle = document.getElementById('select-corners-style').value;

        document.getElementById('label-display').innerText = label;

        qrCode.update({
            data: url || " ",
            image: logo,
            margin: 0, 
            dotsOptions: {
                type: dotsStyle,
                color: dots1,
                gradient: dotsGrad !== "none" ? {
                    type: dotsGrad,
                    colorStops: [{ offset: 0, color: dots1 }, { offset: 1, color: dots2 }]
                } : null
            },
            cornersSquareOptions: { type: cornerStyle, color: cornerColor },
            cornersDotOptions: { type: cornerStyle === 'dot' ? 'dot' : 'square', color: cornerColor }
        });
    }

    function resetSection(section) {
        if (section === 'data') {
            document.getElementById('input-url').value = defaults.url;
            document.getElementById('input-logo').value = defaults.logo;
            document.getElementById('input-label').value = defaults.label;
        } else if (section === 'dots') {
            document.getElementById('color-dots-1').value = defaults.dots1;
            document.getElementById('color-dots-2').value = defaults.dots2;
            document.getElementById('select-dots-style').value = defaults.dotsStyle;
            document.getElementById('select-dots-grad').value = defaults.dotsGrad;
        } else if (section === 'corners') {
            document.getElementById('color-corners').value = defaults.cornersColor;
            document.getElementById('select-corners-style').value = defaults.cornersStyle;
        }
        updateQR();
    }

    document.querySelectorAll('input, select').forEach(el => {
        el.addEventListener('input', updateQR);
    });

    function downloadQR() {
        // Al descargar, forzamos un margen de 5px para que no quede pegado al borde del archivo
        qrCode.update({ margin: 5 });
        qrCode.download({ name: "mi-qr-pro", extension: "png" }).then(() => {
            // Regresamos el margen a 0 para la vista previa web despuÃ©s de descargar
            qrCode.update({ margin: 0 });
        });
    }

    updateQR();
</script>

</body>
</html>
